language: python

os:
 - linux

python:
 - pypy
 - 2.7
 - 3.4
 - 3.5
 - 3.6

env:
 - TWEEPY=tweepy==3.4.0
 - TWEEPY=tweepy==3.5.0
 - TWEEPY="-e git://github.com/tweepy/tweepy.git#egg=tweepy"

matrix:
  fast_finish: true

  exclude:
    - env: TWEEPY=tweepy==3.4.0
      python: 3.4

  allow_failures:
    - env: TWEEPY="-e git://github.com/tweepy/tweepy.git#egg=tweepy"

before_install:
 - export PATH=$PATH:~/.local/bin:~/bin
 - if [[ $TRAVIS_OS_NAME == "osx" ]]; then brew update; fi
 - if [[ $TRAVIS_OS_NAME == "osx" ]]; then brew install python; fi
 - if [[ $TRAVIS_OS_NAME == "osx" ]]; then pip install -U setuptools virtualenv; fi
 - pip install coverage

install:
 - pip install $TWEEPY
 - python setup.py install

script:
 - make test
